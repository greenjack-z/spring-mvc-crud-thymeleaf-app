<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Users List</title>
    <link rel="stylesheet" href="../../resources/styles.css" type="text/css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&family=Roboto:ital@1&display=swap"/>
</head>
<body>

    <table>
        <caption>Table of a registered Users</caption>
        <tr>
            <th>user id</th>
            <th>user name</th>
            <th>user age</th>
        </tr>
        <tr th:each="user : ${allUsers}"
            th:currentId="${user.id}"
            th:currentName="${user.name}"
            th:currentAge="${user.age}"
            th:onClick="rowClicked(this.getAttribute('currentId'), this.getAttribute('currentName'), this.getAttribute('currentAge'))">

            <script>
                function rowClicked(id, name, age) {
                    document.getElementById("id").value = id;
                    document.getElementById("name").value = name;
                    document.getElementById("age").value = age;
                }
            </script>

            <td th:text="${user.id}">id_placeholder</td>
            <td th:text="${user.name}">name_placeholder</td>
            <td th:text="${user.age}">age_placeholder</td>
        </tr>
    </table>

    <form action="#" th:object="${user}" method="post">
        <input id="id" name="id" type="hidden" value="0"/>
        <div><label for="name">user name:</label></div>
        <div><input id="name" name="name" type="text" placeholder="user name"/></div>
        <div><label for="age">user age:</label></div>
        <div><input id="age" name="age" type="number" placeholder="user age"/></div>
        <input type="submit" value="add user" th:formaction="@{/users/add}"/>
        <input type="submit" value="update user" th:formaction="@{/users/update}"/>
        <input type="submit" value="delete user" th:formaction="@{/users/delete}"/>
    </form>

</body>
</html>